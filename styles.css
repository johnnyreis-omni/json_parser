:root {
  --bg: #0b0f14;
  --panel: #111720;
  --panel-soft: #0e1521;
  --muted: #93a3b1;
  --text: #e6edf3;
  --text-strong: #f3f7fb;
  --accent: #5bd0ff;
  --accent-2: #9bffd3;
  --danger: #ff7b7b;
  --ok: #78ffa0;
  --border: #223043;
  --border-strong: #2e425c;
  --focus: #c6f2ff;
  --surface-line: #0c121b;
}

@media (prefers-color-scheme: light) {
  :root {
    --bg: #f7fbff;
    --panel: #ffffff;
    --panel-soft: #ffffff;
    --muted: #405066;
    --text: #0b1320;
    --text-strong: #07101a;
    --accent: #0b84ff;
    --accent-2: #00b37a;
    --danger: #c62828;
    --ok: #1b8e46;
    --border: #d6e2f0;
    --border-strong: #bfd0e6;
    --focus: #0b84ff;
    --surface-line: #eef5ff;
  }
}

.contrast-boost {
  --muted: #cdd7e1;
  --text: #ffffff;
  --text-strong: #ffffff;
  --border: #7ab2ff;
  --border-strong: #a2c8ff;
  --focus: #ffffff;
}

* { box-sizing: border-box; }

html { scroll-behavior: smooth; }
@media (prefers-reduced-motion: reduce) {
  html { scroll-behavior: auto; }
  * { animation: none !important; transition: none !important; }
}

body {
  margin: 0;
  background: linear-gradient(180deg, var(--bg) 0%, #0d121a 100%);
  color: var(--text);
  font: 18px/1.55 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  font-size: clamp(16px, 1.4vw, 18px);
}

a { color: var(--accent); }

.skip-link {
  position: absolute; left: -9999px; top: auto; width: 1px; height: 1px; overflow: hidden;
}
.skip-link:focus {
  left: 12px; top: 12px; width: auto; height: auto; padding: 8px 10px;
  background: var(--panel); border: 2px solid var(--focus); border-radius: 8px; z-index: 10;
}

header {
  padding: 18px 22px;
  border-bottom: 1px solid var(--border);
  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: 12px;
  align-items: center;
}
header h1 {
  margin: 0;
  font-size: clamp(20px, 2.2vw, 26px);
  letter-spacing: .2px;
  font-weight: 800;
}
header .tag {
  font-size: 12px;
  color: #0b0f14;
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  padding: 2px 8px;
  border-radius: 999px;
  font-weight: 700;
  justify-self: start;
}
.header-actions {
  justify-self: end; display: flex; gap: 8px; align-items: center;
}

.wrap {
  display: grid;
  gap: 16px;
  padding: 16px;
  grid-template-columns: 1fr 1.2fr;
  grid-template-areas:
    "howto howto"
    "left right";
  align-items: start;
}
@media (min-width: 1200px) {
  .wrap {
    grid-template-columns: minmax(360px, 0.9fr) 1.4fr;
  }
}
@media (max-width: 900px) {
  .wrap {
    grid-template-columns: 1fr;
    grid-template-areas:
      "howto"
      "left"
      "right";
  }
}

.area-howto { grid-area: howto; }
.area-left { grid-area: left; }
.area-right { grid-area: right; }

.card {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 14px;
  overflow: clip;
}
.card h2 {
  margin: 0; padding: 14px 16px; font-size: 14px; color: var(--muted);
  background: linear-gradient(180deg, #0f1622 0%, var(--panel) 100%);
  border-bottom: 1px solid var(--border);
  letter-spacing: .2px;
}
@media (prefers-color-scheme: light) {
  .card h2 { background: linear-gradient(180deg, #f1f7ff 0%, var(--panel) 100%); }
}
.card .body { padding: 14px; }

.steps {
  margin: 0;
  padding-left: 18px;
  display: grid;
  gap: 10px;
  font-size: 15px;
}
.tips { margin-top: 8px; }

textarea, select, input[type="text"], input[type="search"] {
  width: 100%;
  background: var(--panel-soft);
  color: var(--text-strong);
  border: 1px solid var(--border-strong);
  border-radius: 12px;
  padding: 12px 14px;
  outline: none;
  font-size: 15px;
}
textarea {
  min-height: 240px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
}
input[type="search"], select, input[type="text"] { min-height: auto; font-family: inherit; }
textarea:focus, select:focus, input:focus, button:focus { outline: 3px solid transparent; box-shadow: 0 0 0 3px var(--focus); }

.controls { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
@media (max-width: 520px) { .controls { grid-template-columns: 1fr; } }

button {
  background: var(--panel-soft);
  color: var(--text-strong);
  border: 1px solid var(--border-strong);
  border-radius: 12px;
  padding: 12px 14px;
  font-size: 14px;
  cursor: pointer;
  line-height: 1;
  min-height: 46px;
}
button.primary {
  background: linear-gradient(90deg, #116a8f, #114a8f);
  border-color: #165a8f; font-weight: 800; color: #e9f7ff;
}
button.secondary { background: var(--panel-soft); }

.note { color: var(--muted); font-size: 13px; margin-top: 8px; }

.label-strong { color: var(--text-strong); }

.body-split {
  display: grid;
  grid-template-columns: 0.42fr 0.58fr;
  gap: 12px;
}
@media (max-width: 1100px) {
  .body-split { grid-template-columns: 1fr; }
}

.side { display: grid; align-content: start; gap: 8px; }
.main { display: grid; align-content: start; gap: 8px; }

label { font-size: 13px; color: var(--muted); }

.tree {
  max-height: min(60vh, 640px);
  overflow: auto;
  padding: 10px;
  border: 1px solid var(--border-strong);
  border-radius: 12px;
  background: var(--panel-soft);
  font-size: 15px;
}
.tree ul { list-style: none; margin: 0; padding-left: 16px; }
.tree li { margin: 2px 0; position: relative; }

.tree .node {
  display: inline-flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px 10px; border-radius: 10px;
  color: var(--text-strong);
}
.tree .node:hover { background: rgba(91, 208, 255, 0.10); }
.tree .node:focus-visible { outline: 3px solid transparent; box-shadow: 0 0 0 3px var(--focus); }
.node .chev { width: 12px; text-align: center; transition: transform .15s ease; opacity: .85; color: var(--muted); }
.node .k { font-family: ui-monospace, monospace; }
.node .meta {
  font-size: 12px; color: var(--muted); padding: 2px 8px; border: 1px solid var(--border-strong); border-radius: 999px; background: var(--surface-line);
}
.collapsed > ul { display: none; }
.collapsed > .node .chev { transform: rotate(-90deg); }
.leaf { color: var(--accent-2); }
.selected .node { background: rgba(91, 208, 255, 0.18); }

.out { display: grid; gap: 12px; }
.out .line {
  background: var(--panel-soft);
  border: 1px solid var(--border-strong);
  border-radius: 12px;
  padding: 12px 14px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  word-break: break-all;
  font-size: 15px;
  color: var(--text-strong);
}
.out .title { font-size: 13px; color: var(--muted); margin-bottom: 4px; }
.copy {
  font-size: 13px; padding: 12px 14px; border-radius: 12px; border: 1px solid var(--border-strong);
  background: var(--panel-soft); color: var(--text-strong); cursor: pointer; min-height: 42px;
}

.status { font-size: 13px; color: var(--muted); }
.status.bad { color: var(--danger); }
.status.good { color: var(--ok); }

.search { display: grid; grid-template-columns: 1fr auto; gap: 10px; margin-bottom: 10px; }
.results {
  max-height: 260px; overflow: auto; border: 1px solid var(--border-strong); border-radius: 12px; padding: 8px;
  background: var(--panel-soft);
}
.results .hit {
  display: flex; align-items: center; gap: 8px; padding: 8px; border-radius: 10px; cursor: pointer; color: var(--text-strong);
}
.results .hit:hover, .results .hit:focus { background: rgba(155, 255, 211, .10); outline: none; }
.pill { font-size: 11px; color: var(--muted); border: 1px solid var(--border-strong); border-radius: 999px; padding: 0 8px; background: var(--surface-line); }
.footer-note { color: var(--muted); font-size: 12px; padding: 10px 14px; border-top: 1px solid var(--border); }
.footer-note a { color: var(--muted); font-weight:600 }

.visually-hidden { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }
